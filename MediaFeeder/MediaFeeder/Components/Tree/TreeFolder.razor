@using Humanizer
@using MediaFeeder.Data
@if (Folder != null)
{
    <TreeNode SelectedChanged="OnSelectedChanged" TItem="ITreeSelectable" DataItem="@Folder">
        <TitleTemplate>
            @Folder.Name
            @if (Unwatched > 0)
            {
                <sup class="ant-scroll-number ant-badge-count" style="right:-15px; background-color: #007bff;">
                    @Unwatched.ToMetric(decimals: 1)
                </sup>
            }
            @if (Downloaded > 0) {
                <sup class="ant-scroll-number ant-badge-count" style="right:-15px; background-color: #59b352">
                    @Downloaded.ToMetric(decimals: 1)
                </sup>
            }
        </TitleTemplate>
        <ChildContent>
            @foreach (var subfolder in Folder.Subfolders)
            {
                <TreeFolder Folder="subfolder" Parent="@(this)"/>
            }
            @if (Folder != null)
                @foreach (var subscription in Folder.Subscriptions)
            {
                <TreeSubscription Subscription="@subscription" Parent="this"/>
            }
        </ChildContent>
    </TreeNode>
}
else
{
    <Skeleton/>
}
